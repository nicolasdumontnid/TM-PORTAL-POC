<div class="chat-section">
  <h3 class="nav-title">Chat</h3>
  <div class="chat-list">
    <div 
      *ngFor="let contact of contacts$ | async"
      class="chat-contact"
      [class.unread]="contact.isUnread"
      (click)="openChat(contact)"
    >
      <div class="avatar-container">
        <img [src]="contact.avatar" [alt]="contact.name + ' Avatar'" class="avatar">
        <div *ngIf="contact.isOnline" class="status-dot"></div>
      </div>
      <div class="chat-info">
        <div class="name">{{contact.name}}</div>
        <div class="message">{{contact.lastMessage}}</div>
        <div *ngIf="contact.participants && !contact.isOnline" class="participants">
          <span *ngFor="let participant of contact.participants; let last = last">
            {{participant}}<span *ngIf="!last">, </span>
          </span>
        </div>
      </div>
    </div>
  </div>
  
  <app-chat-modal
    *ngIf="showChatModal && selectedContact"
    [contact]="selectedContact"
    (close)="closeChatModal()">
  </app-chat-modal>
</div>